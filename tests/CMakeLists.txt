IF(NOT UNITTEST_FOUND)
    PKG_CHECK_MODULES(UNITTEST unittest++)
ENDIF(NOT UNITTEST_FOUND)

IF(UNITTEST_FOUND)
ENABLE_TESTING()

INCLUDE_DIRECTORIES(
    ${CMAKE_CURRENT_SOURCE_DIR}/..
    ${UNITTEST_INCLUDE_DIRS}
)

FILE(GLOB_RECURSE TEST_FILES *.cpp)

ADD_EXECUTABLE(kglt_tests ${TEST_FILES})
ADD_TEST(kglt_suite kglt_tests)

TARGET_LINK_LIBRARIES(
    kglt_tests
    ${UNITTEST_LIBRARIES}
    kglt
)

ENDIF(UNITTEST_FOUND)
